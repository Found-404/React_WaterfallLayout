(function(G,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],c):(G=typeof globalThis<"u"?globalThis:G||self,c(G.WaterfallReact={},G.React))})(this,function(G,c){"use strict";var R={exports:{}},W={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _;function D(){if(_)return W;_=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function s(l,r,e){var t=null;if(e!==void 0&&(t=""+e),r.key!==void 0&&(t=""+r.key),"key"in r){e={};for(var a in r)a!=="key"&&(e[a]=r[a])}else e=r;return r=e.ref,{$$typeof:n,type:l,key:t,ref:r!==void 0?r:null,props:e}}return W.Fragment=i,W.jsx=s,W.jsxs=s,W}var j;function V(){return j||(j=1,R.exports=D()),R.exports}var S=V(),Y=(()=>{function n(e,t,a,g){let f=e.clientWidth,u=a.length,m=0,h=0;for(;h<u;){let o=i(f,t,a,h);for(let p=0,w=0,M,y;p<o.count;p++)M=a[h+p],y=g[h+p],y.top=m,y.left=o.left+w,y.width=M.width*o.height/M.height,y.height=o.height,w+=y.width;h+=o.count,m+=o.height}e.style.height=m+"px"}function i(e,t,a,g){let f=s(e,t.lineGap,a,g),u=Math.max(f-1,1),m=l(e,t,a,g,f),h=l(e,t,a,g,u),o=r(h,m,e),p=o.height,w=o.width;return o.count===1&&(w=Math.min(t.singleMaxWidth,e),p=a[g].height*w/a[g].width),{left:A(e,w,t.align),count:o.count,height:p}}function s(e,t,a,g){let f=0;for(let u=g,m=0;u<a.length&&m<=e;u++)m+=a[u].width*t/a[u].height,f++;return f}function l(e,t,a,g,f){let u=0;for(let o=f-1;o>=0;o--){let p=a[g+o];u+=p.width*t.lineGap/p.height}let m=t.lineGap*e/u;if(m<=t.maxLineGap&&m>=t.minLineGap)return{cost:Math.abs(t.lineGap-m),count:f,width:e,height:m};{let o=u>e?t.minLineGap:t.maxLineGap;return{cost:1/0,count:f,width:u*o/t.lineGap,height:o}}}function r(e,t,a){return e.cost===1/0&&t.cost===1/0?t.width<a?t:e:t.cost>=e.cost?e:t}return{calculate:n}})(),U=(()=>{function n(l,r,e,t){let a=l.clientWidth,g=r.grow,f=g?s(a,g):i(a,r),u=F(0,f.count);e.forEach((m,h)=>{let o=u.reduce((M,y,b)=>y<u[M]?b:M,0),p=f.width[o%f.count],w=t[h];w.top=u[o],w.left=f.left+(o?P(f.width.slice(0,o)):0),w.width=p,w.height=m.height*(r.fixedHeight?1:p/m.width),u[o]=u[o]+w.height}),l.style.height=Math.max.apply(Math,u)+"px"}function i(l,r){let e=l/r.lineGap,t;if(r.singleMaxWidth>=l)e=1,t=Math.max(l,r.minLineGap);else{let a=r.maxLineGap*~~e,g=r.minLineGap*~~(e+1),f=a>=l,u=g<=l;f&&u?(e=Math.round(e),t=l/e):f?(e=~~e,t=l/e):u?(e=~~(e+1),t=l/e):(e=~~e,t=r.maxLineGap),e===1&&(t=Math.min(l,r.singleMaxWidth),t=Math.max(t,r.minLineGap))}return{width:F(t,e),count:e,left:A(l,t*e,r.align)}}function s(l,r){let e=P(r);return{width:r.map(t=>l*t/e),count:r.length,left:0}}return{calculate:n}})();function A(n,i,s){switch(s){case"right":return n-i;case"center":return(n-i)/2;default:return 0}}function F(n,i){let s=typeof n=="function"?()=>n():()=>n,l=[];for(let r=0;r<i;r++)l[r]=s();return l}function P(n){return n.reduce((i,s)=>i+s)}const H=c.createContext(),$="_wfMoveClass";function O(n,i,s,l=!1){n.addEventListener(i,s,l)}function Q(n,i,s,l=!1){n.removeEventListener(i,s,l)}function X(n){let i=n.target,s=i[$];s&&Z(i,s)}function Z(n,i){let s=new RegExp("\\s*\\b"+i+"\\b\\s*","g"),l=T(n,"class").replace(s," ").trim();T(n,"class",l)}function T(n,i,s){if(typeof s<"u")n.setAttribute(i,s);else return n.getAttribute(i)||""}function K(){return window.ontransitionend===void 0&&window.onwebkittransitionend!==void 0?"webkitTransitionEnd":"transitionend"}function ee(n,i){return i!==n.clientWidth}function te(n,i,s){let l=i.left-s.left,r=i.top-s.top,e=i.width/s.width,t=i.height/s.height;n.style.transform=n.style.WebkitTransform=`translate(${l}px,${r}px) scale(${e},${t})`,n.style.transitionDuration="0s"}function ne(n,i){if(!re(n,i)){let l=(T(n,"class").trim()+" "+i).trim();T(n,"class",l)}}function re(n,i){return new RegExp("\\b"+i+"\\b").test(T(n,"class"))}function ie(n){n.style.transform=n.style.WebkitTransform="",n.style.transitionDuration=""}function q(n){const{autoResize:i=!0,interval:s=200,align:l="left",line:r="v",lineGap:e=200,minLineGap:t,maxLineGap:a,singleMaxWidth:g,grow:f,fixedHeight:u=!1,watch:m={}}=n,h=c.useRef(null),o=c.useRef([]),p=c.useRef([]),[w,M]=c.useState([]);function y(){if(!h.current)return;let d=h.current.clientWidth;M(()=>{const v=Array.from(o.current).map(x=>x.getMeta());return v.sort((x,C)=>x.order-C.order),p.current=v.map(()=>({})),z(h.current,v,p.current),setTimeout(()=>{ee(h.current,d)&&z(h.current,v,p.current),console.log(p.current),h.current.style.overflow="hidden",b(p.current,v)},0),v})}function b(d,v){let x=v.filter(E=>E.moveClass),C=J(x);se(d,v);let L=J(x);x.forEach((E,B)=>{E.node.current[$]=E.moveClass,te(E.node.current,C[B],L[B])}),x.forEach(E=>{ne(E.node.current,E.moveClass),ie(E.node.current)})}function se(d,v){d.forEach((x,C)=>{let L=v[C].node.current.style;o.current[C].setRect(x);for(let E in x)L[E]=x[E]+"px"})}function J(d){return d.map((v,x)=>o.current[x].getRect())}const N=c.useRef(null);function k(){clearTimeout(N.current),N.current=setTimeout(y,s)}const ae=()=>{O(h.current,K(),X,!0),oe(i)};function oe(d){d===!1||!d?Q(window,"resize",k,!1):O(window,"resize",k,!1)}function ue(){const d=a?+a:e;return{align:~["left","right","center"].indexOf(l)?l:"left",line:~["v","h"].indexOf(r)?r:"v",lineGap:+e,minLineGap:t?+t:e,maxLineGap:d,singleMaxWidth:Math.max(g||0,a),fixedHeight:!!u,grow:f&&f.map(v=>+v)}}function z(d,v,x){let C=ue();(r==="h"?Y:U).calculate(d,C,v,x)}c.useEffect(()=>{ae(),k()},[]);const fe=c.useMemo(()=>n.children,[n.children]);c.useEffect(()=>{y()},[fe]);const ce=c.Children.map(n.children,(d,v)=>c.cloneElement(d,{ref:x=>{typeof d.ref=="function"?d.ref(x):d.ref&&typeof d.ref!="function"&&(d.ref.current=x),o.current[v]=x}}));return S.jsx("div",{className:"waterfall",ref:h,children:S.jsx(H.Provider,{value:{reflow:y},children:ce})})}const I=c.forwardRef((n,i)=>{const{width:s,height:l,order:r,moveClass:e}=n,t=c.useRef(),[a,g]=c.useState({top:0,left:0,width:0,height:0,order:r}),[f,u]=c.useState(!1);c.useContext(H);const m=()=>({vm:t,node:t,order:r,width:s,height:l,moveClass:e}),h=()=>{u(!0)};return c.useEffect(()=>{h()},[]),c.useImperativeHandle(i,()=>({getMeta:m,getRect:()=>a,setRect:o=>g(o)})),S.jsx("div",{className:"waterfall-slot",ref:t,style:{visibility:f?"visible":"hidden"},children:n.children})}),le={Waterfall:q,WaterfallSlot:I};G.Waterfall=q,G.WaterfallSlot=I,G.default=le,Object.defineProperties(G,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
